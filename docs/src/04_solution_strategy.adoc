ifndef::imagesdir[:imagesdir: ../images]

[[section-solution-strategy]]
== Solution Strategy

=== Technological Decisions

To support the functional and non-functional requirements of WIChat, the following technologies and architectural components were selected to optimize performance, maintainability, and scalability:

* *Programming Language:* **TypeScript**  
  TypeScript was chosen as the main programming language due to its static typing, early error detection, and improved maintainability. It enables safer code than plain JavaScript while allowing reuse of existing JS libraries and code.

* *Frontend Framework:* **React.js**  
  React.js is used to build a modular and interactive user interface, ideal for dynamic quiz generation and chat components.

* *Backend Runtime:* **Node.js**  
  Node.js supports an event-driven, non-blocking architecture, which is well-suited for handling concurrent requests across microservices.

* *Architecture Pattern:* **Microservices**  
  The system is split into independent services for separation of concerns and scalability:
  - `webapp`: frontend interface.
  - `gatewayservice`: routes requests to backend services.
  - `authservice`: manages user authentication and session control.
  - `userservice`: handles user data and roles.
  - `historicservice`: handles user records for the historic.
  - `llmservice`: interfaces with Gemini for AI-based hint generation.
  - `questionservice`: interfaces with wikidata for question generation.
  - `cardservice`: interfaces for the images generation for the card game.
  - `gateway-api-service`: manage request to the api server.

* *Database:* **MongoDB**  
  A NoSQL, document-based database was selected to support flexible schema design and efficient horizontal scaling. `authservice` and `userservice` share the same MongoDB instance.

* *External APIs:*  
  - **Wikidata:** Used to dynamically query structured, up-to-date knowledge to generate quiz questions.  
  - **Gemini (LLM):** Integrated via the `llmservice` to generate intelligent hints and chat responses based on question context.

* *Observability:*  
  - **Prometheus:** Collects metrics from services for monitoring.  
  - **Grafana:** Displays dashboards and alerts for observability and system health.

* *Version Control & CI/CD:* **GitHub**  
  GitHub is used for collaborative development and version control. GitHub Actions automates testing and deployments.

* *Containerization:* **Docker**  
  All services are containerized using Docker. `docker-compose` orchestrates services locally and in test environments.

=== Decisions to Achieve Key Quality Goals

The following strategic decisions help fulfill the project's quality goals:

* *Performance:*  
  - MongoDB supports fast read/write operations.  
  - Asynchronous handling of LLM requests prevents UI blocking.

* *Maintainability:*  
  - Use of TypeScript ensures code clarity and early error detection.  
  - Modular microservices and UI components ease code updates and testing.

* *Scalability:*  
  - The microservice-based design enables independent deployment and scaling.  
  - Stateless services facilitate horizontal scaling in containerized environments.

* *Security:*  
  - Session-based authentication with encrypted credentials.  
  - Role-based access control (RBAC) restricts sensitive operations.  
  - System logs all key events: user creations, logins (successful/failed), logouts, and API accesses.

* *Usability and Accessibility:*  
  - UI follows accessibility guidelines to ensure inclusivity.  
  - Interactive hints generated by Gemini increase engagement and help users learn.

* *Reliability and Testing:*  
  - Unit and integration tests ensure individual module correctness.  
  - End-to-end tests validate complete workflows.  
  - Load and performance testing (via **Artillery**) verify stability under stress.

* *Deployment Strategy:*  
  - The system is prepared for deployment on ECS with Fargate or EC2 with Auto Scaling Groups using Packer-built AMIs.  
  - A GitHub self-hosted runner on EC2 automates production deployment workflows.

ifdef::arc42help[]
[role="arc42help"]
****
.Contents
A short summary and explanation of the fundamental decisions and solution strategies, that shape system architecture. It includes

* technology decisions
* decisions about the top-level decomposition of the system, e.g. usage of an architectural pattern or design pattern
* decisions on how to achieve key quality goals
* relevant organizational decisions, e.g. selecting a development process or delegating certain tasks to third parties.

.Motivation
These decisions form the cornerstones for your architecture. They are the foundation for many other detailed decisions or implementation rules.

.Form
Keep the explanations of such key decisions short.

Motivate what was decided and why it was decided that way,
based upon problem statement, quality goals and key constraints.
Refer to details in the following sections.

.Further Information

See https://docs.arc42.org/section-4/[Solution Strategy] in the arc42 documentation.

****
endif::arc42help[]
